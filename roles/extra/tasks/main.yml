---
# tasks file for extra
- name: Install tmux
  become: true
  ansible.builtin.package:
    name: tmux

- name: Setup tmux config directory
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/.config/tmux"
    state: directory
    mode: '0755'

- name: Git clone tpm repo
  ansible.builtin.git:
    repo: 'https://github.com/tmux-plugins/tpm.git'
    dest: "{{ ansible_user_dir }}/.tmux/plugins/tpm"
    version: master
    update: false

- name: Create tmux.conf file
  ansible.builtin.copy:
    src: tmux.conf
    dest: "{{ ansible_user_dir }}/.config/tmux/tmux.conf"
    mode: '0644'
    backup: true

- name: Specific install for Debian based OS
  when: ansible_os_family == 'Debian'
  become: true
  block:
    - name: Install micro text editor
      ansible.builtin.apt:
        name: micro
      notify:
        - Change default text editor to micro
        - Keep 'SYSTEMD_EDITOR' when using sudo

    - name: Install lsd cli
      ansible.builtin.apt:
        name: lsd

    - name: Install following packages on all server
      ansible.builtin.apt:
        name: bat
      notify: Create alias if 'bat' cli is installed
